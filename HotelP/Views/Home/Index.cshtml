@model Hotel.ViewModels.HomeViewModel
@{
	ViewData["Title"] = "Home";
}
<aside id="colorlib-hero">
	<div class="flexslider">
		<ul class="slides">
			<li style="background-image: url('images/img_bg_5.jpg');">
				<div class="overlay"></div>
				<div class="container-fluid">
					<div class="row">
						<div class="col-md-6 col-sm-12 col-md-offset-3 slider-text">
							<div class="slider-text-inner text-center">
								<h2>Witaj w Hotelu Paradise</h2>
								<h1>Hotel Paradise</h1>
							</div>
						</div>
					</div>
				</div>
			</li>

			<li style="background-image: url('images/img_bg_1.jpg');">
				<div class="overlay"></div>
				<div class="container-fluids">
					<div class="row">
						<div class="col-md-6 col-sm-12 col-md-offset-3 slider-text">
							<div class="slider-text-inner text-center">
								<h2>Jesteś miło widziany</h2>
								<h1>Wiemy jak spełnić Twoje oczekiwania</h1>
							</div>
						</div>
					</div>
				</div>
			</li>
			<li style="background-image: url('images/img_bg_4.jpg');">
				<div class="overlay"></div>
				<div class="container-fluid">
					<div class="row">
						<div class="col-md-6 col-sm-12 col-md-offset-3 slider-text">
							<div class="slider-text-inner text-center">
								<h2>Przyjedź &amp; ciesz się z niezapomianego pobytu</h2>
								<h1>W sercu luksusowego hotelu</h1>
							</div>
						</div>
					</div>
				</div>
			</li>
		</ul>
	</div>
</aside>

<div id="colorlib-reservation">
	<div class="container">
		<div class="row">
			<div class="col-md-12 search-wrap">
				<!-- Używamy GET i wskazujemy na naszą akcję w PublicBookingController -->
				<form method="get" action="@Url.Action("SearchRooms", "PublicBooking")" class="colorlib-form">
					<div class="row">
						<!-- Check-in -->
						<div class="col-md-3">
							<div class="form-group">
								<label for="date">Data przyjazdu:</label>
								<div class="form-field">
									<i class="icon icon-calendar2"></i>
									<input type="text" name="checkIn" id="date" class="form-control date" placeholder="Data przyjazdu">
								</div>
							</div>
						</div>
						<div class="col-md-3">
							<div class="form-group">
								<label for="date">Data wyjazdu:</label>
								<div class="form-field">
									<i class="icon icon-calendar2"></i>
									<input type="text" name="checkOut" id="date" class="form-control date" placeholder="Data wyjazdu">
								</div>
							</div>
						</div>

						<!-- Adults -->
						<div class="col-md-2">
							<div class="form-group">
								<label for="adults">Dorośli</label>
								<div class="form-field">
									<i class="icon icon-arrow-down3"></i>
									<select name="adults" class="form-control">
										<option value="1">1</option>
										<option value="2" selected>2</option>
										<option value="3">3</option>
										<option value="4">4</option>
										<option value="5">5+</option>
									</select>
								</div>
							</div>
						</div>

						<!-- Children -->
						<div class="col-md-2">
							<div class="form-group">
								<label for="children">Dzieci</label>
								<div class="form-field">
									<i class="icon icon-arrow-down3"></i>
									<select name="children" class="form-control">
										<option value="0" selected>0</option>
										<option value="1">1</option>
										<option value="2">2</option>
										<option value="3">3</option>
										<option value="4">4+</option>
									</select>
								</div>
							</div>
						</div>

						<!-- Submit -->
						<div class="col-md-2">
							<input type="submit"
								   name="submit"
								   id="submit"
								   value="Szukaj"
								   class="btn btn-primary btn-block" />
						</div>
					</div> <!-- .row -->
				</form>
			</div>
		</div>
	</div>
</div>


<div id="colorlib-services">
	<div class="container">
		<div class="row">
			<div class="col-md-3 animate-box text-center">
				<div class="services">
					<span class="icon">
						<i class="flaticon-reception"></i>
					</span>
					<h3>24/7 Czynna Recepcja</h3>
					<p>Nasza recepcja jest czynna całą dobę, siedem dni w tygodniu. O każdej porze ugościmy naszych gości wygodnymi pokojami, pysznym posiłkiem i wspaniałą obsługą.</p>
				</div>
			</div>
			<div class="col-md-3 animate-box text-center">
				<div class="services">
					<span class="icon">
						<i class="flaticon-herbs"></i>
					</span>
					<h3>Strefa SPA</h3>
					<p>Do dyspozycji naszych jestSPA, gdzie w kameralnej atmosferze odnajdziesz spokój i odprężenie. Nowocześnie urządzone wnętrza oraz profesjonalny personel gwarantują najwyższy poziom relaksu i pielęgnacji. W bogatej ofercie znajdziesz zróżnicowane zabiegi, masaże i rytuały, które pomogą Ci zadbać o równowagę ciała i ducha. Daj się porwać kojącej mocy luksusu, by odzyskać energię i wewnętrzną harmonię. </p>
				</div>
			</div>
			<div class="col-md-3 animate-box text-center">
				<div class="services">
					<span class="icon">
						<i class="flaticon-car"></i>
					</span>
					<h3>Usługi transferowe</h3>
					<p>Nasz hotel zapewnia kompleksową usługę transferową, dzięki której dotrzesz wygodnie i bez stresu z lotniska lub dworca prosto do miejsca zakwaterowania. Doświadczony zespół kierowców oferuje punktualny i bezpieczny transport, dostosowany do indywidualnych potrzeb gości.</p>
				</div>
			</div>
			<div class="col-md-3 animate-box text-center">
				<div class="services">
					<span class="icon">
						<i class="flaticon-cheers"></i>
					</span>
					<h3>Restaurant &amp; Bar</h3>
					<p>Nasza restauracja to serce hotelu, w którym tradycje kulinarne łączą się z nowoczesnymi trendami, by zadowolić najbardziej wymagające podniebienia. Dzięki profesjonalnej obsłudze i eleganckiej atmosferze każdy posiłek staje się niezapomnianym doświadczeniem, idealnym zarówno na kameralny wieczór, jak i spotkanie biznesowe.</p>
				</div>
			</div>
		</div>
	</div>
</div>

@if (Model.AccommodationTypes != null && Model.AccommodationTypes.Any()
							&& Model.AccommodationPackages != null && Model.AccommodationPackages.Any())
{
	<div id="colorlib-rooms" class="colorlib-light-grey">
		<div class="container">
			<!-- (1) NAGŁÓWEK i PRZYCISKI DO WYBORU TYPU - WYWYŚWIETLANY TYLKO RAZ -->
			<div class="row">
				<div class="col-md-6 col-md-offset-3 text-center colorlib-heading animate-box">
					<span>
						<i class="icon-star-full"></i><i class="icon-star-full"></i>
						<i class="icon-star-full"></i><i class="icon-star-full"></i>
						<i class="icon-star-full"></i>
					</span>
					<h2>Noclegi</h2>
					<p>Wybierz rodzaj zakwaterowania</p>
					<p>
						@foreach (var xType in Model.AccommodationTypes)
						{
							<button class="btn btn-sm changeAccommodationType"
									data-id="@xType.ID">
								@xType.Name
							</button>
						}
					</p>
				</div>
			</div>

			<!-- (2) PĘTLA PO TYPACH: generujemy jedną sekcję .accommodationTypesRow NA KAŻDY TYP -->
			@{
				var i = 0; // steruje tym, że pierwszy typ jest widoczny, reszta np. ukryta
			}

			@foreach (var type in Model.AccommodationTypes)
			{
				<div class="row accommodationTypesRow"
					 data-id="@type.ID"
					 style="@(i != 0 ? "display:none" : "")">

					<div class="col-md-12 animate-box">
						<div class="owl-carousel owl-carousel2">
							@foreach (var package in Model.AccommodationPackages
												.Where(p => p.AccommodationTypeID == type.ID))
							{
								// Dla każdego package ustalamy miniaturę
								var thumbnail = package.AccomodationPackagePictures
								?.FirstOrDefault()?.Picture?.URL
								?? "default-image.jpg";

								<div class="item">
									<!-- Link do szczegółów pakietu:
										 nazwa i cena (FeePerNight) -->
									<a href="@Url.Action("DetailsPackage", "Accomodations",
                                        new { accomodationPackageID = package.ID })"
									   class="room image-popup-link"
									   style="background-image: url('/images/site/@thumbnail');">
									</a>

									<div class="desc text-center">
										<h3>
											<a href="@Url.Action("DetailsPackage", "Accomodations",
                                                    new { accomodationPackageID = package.ID })">
												@package.Name
											</a>
										</h3>
										<p class="price">
											@package.FeePerNight
										</p>
										<p>
											<a class="btn btn-primary btn-book"
											   href="@Url.Action("DetailsPackage", "Accomodations",
                                                    new { accomodationPackageID = package.ID })">
												Szczegóły
											</a>
										</p>
									</div>
								</div>
							}
						</div>
					</div>

					<div class="col-md-12 text-center animate-box">
						<a href="@Url.Action("AllAccommodations", "Accomodations")">Zobacz wszystkie pokoje <i class="icon-arrow-right3"></i></a>
					</div>
				</div>

				// Na koniec pętli zwiększamy 'i'
				i++;
			}
		</div>
	</div>
}


<div id="colorlib-dining-bar">
	<div class="container">
		<div class="row">
			<div class="col-md-6 col-md-offset-3 text-center colorlib-heading animate-box">
				<span><i class="icon-star-full"></i><i class="icon-star-full"></i><i class="icon-star-full"></i><i class="icon-star-full"></i><i class="icon-star-full"></i></span>
				<h2>Posiłki &amp; Bar</h2>
				<p>Opis ogólny – dynamiczne kategorie z bazy.</p>
			</div>
		</div>
		<div class="row">
			<div class="diningbar-flex">

				<!-- Lewa połówka z zakładkami -->
				<div class="half animate-box">
					<!-- Tworzymy dynamiczną listę zakładek w <ul> -->
					<ul class="nav nav-tabs text-center" role="tablist">

						@* Iterujemy po kategoriach – i-th kategoria = i-ta zakładka *@
						@for (int i = 0; i < Model.DishCategories.Count; i++)
						{
							var cat = Model.DishCategories[i];
							// Pierwsza zakładka "active"
							var liClass = i == 0 ? "active" : "";
							var hrefId = $"tab-cat-{cat.ID}";

							<li role="presentation" class="@liClass">
								<a href="#@hrefId"
								   aria-controls="@hrefId"
								   role="tab"
								   data-toggle="tab">
									@cat.Name
								</a>
							</li>
						}
					</ul>

					<!-- Treść zakładek -->
					<div class="tab-content">
						@for (int i = 0; i < Model.DishCategories.Count; i++)
						{
							var cat = Model.DishCategories[i];
							var divClass = i == 0 ? "tab-pane active" : "tab-pane";
							var divId = $"tab-cat-{cat.ID}";

							// Wybrane dania z danej kategorii:
							var catDishes = Model.AllDishes
							.Where(d => d.CategoryID == cat.ID)
							.ToList();

							<div role="tabpanel" class="@divClass" id="@divId">
								<div class="row">
									<div class="col-md-12">
										<ul class="menu-dish">
											@if (catDishes.Any())
											{
												@foreach (var dish in catDishes)
												{
													var firstPic = dish.DishPictures
													?.FirstOrDefault()?.Picture?.URL
													?? "default-image.jpg";

													<li>
														<figure class="image">
															<img src="@($"/images/site/{firstPic}")" alt="@dish.Name" />
														</figure>
														<div class="text">
															<span class="price">
																@dish.Price.ToString("00 zł")
															</span>
															<h3>@dish.Name</h3>
															<p class="cat">@dish.Description</p>
														</div>
													</li>
												}
											}
											else
											{
												<li>
													<div class="alert alert-warning">
														Brak dań w tej kategorii.
													</div>
												</li>
											}
										</ul>
									</div>
								</div>
							</div>
						}
					</div>
				</div> <!-- end half -->
				<!-- Prawa połówka: np. zdjęcie w tle -->
				<div class="half diningbar-img"
					 style="background-image: url('/images/cover_img_1.jpg');">
				</div>
			</div>
		</div>
	</div>
</div>

<div id="colorlib-testimony" class="colorlib-light-grey">
	<div class="container">
		<div class="row">
			<div class="col-md-6 col-md-offset-3 text-center colorlib-heading animate-box">
				<span><i class="icon-star-full"></i><i class="icon-star-full"></i><i class="icon-star-full"></i></span>
				<h2>Nasi usatysfakcjonowani goście</h2>
				<p>Zadowolenie Gości jest dla nas najwyższym priorytetem, dlatego przykładamy ogromną wagę do jakości obsługi na każdym etapie pobytu. Cieszy nas każda pozytywna opinia, bo potwierdza, że udało nam się stworzyć miejsce, w którym każdy czuje się wyjątkowo.</p>
			</div>
		</div>
		<div class="row">
			<div class="col-md-4 animate-box">
				<div class="testimony text-center">
					<span class="img-user" style="background-image: url('images/person2.jpg');"></span>
					<span class="user">Filip</span>
					<small>Zadowolony klient</small>
					<blockquote>
						<p></i> Pobyt w tym hotelu był niezwykły – obsługa na najwyższym poziomie, a pokoje naprawdę komfortowe!</p>
					</blockquote>
				</div>
			</div>
			<div class="col-md-4 animate-box">
				<div class="testimony text-center">
					<span class="img-user" style="background-image: url('images/person1.jpg');"></span>
					<span class="user">Natalia</span>
					<small>Zadowolona klientka</small>
					<blockquote>
						<p></i> Bardzo miła atmosfera, pyszne jedzenie i świetna strefa SPA – idealne miejsce na relaks.</p>
					</blockquote>
				</div>
			</div>
			<div class="col-md-4 animate-box">
				<div class="testimony text-center">
					<span class="img-user" style="background-image: url('images/person3.jpg');"></span>
					<span class="user">Chloe</span>
					<small>Zadowolona klientka</small>
					<blockquote>
						<p></i> Absolutely love this place! Obsługa jest wyjątkowo friendly i helpful – zdecydowanie 5 stars!</p>
					</blockquote>
				</div>
			</div>
		</div>
	</div>
</div>
